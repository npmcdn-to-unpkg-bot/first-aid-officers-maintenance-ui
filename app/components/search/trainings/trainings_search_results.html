<h3>Formations - recherche avanc&eacute;e - <span class="text-primary">r&eacute;sultats</span></h3>
<br />
<div class="row">
    <div class="col-md-8 col-md-offset-2">
        <div class="panel panel-primary">
            <div class="panel-heading">Crit&egrave;res de recherche</div>
            <div class="panel-body" ng-if="noFilter">
                <div class="col-xs-4 text-right">Filtrage des r&eacute;sultats</div>
                <div class="col-xs-8 text-primary">Aucun filtre appliqu&eacute;</div>
            </div>
            <div class="panel-body" ng-if="!noFilter">
                <div class="row" ng-if="filter.status">
                    <div class="col-xs-4 text-right">Statut</div>
                    <div class="col-xs-8">
                        <label class="label label-{{filter.status === 'over' ? 'success' : 'primary'}}">{{filter.status === 'over' ? 'R&eacute;alis&eacute;e' : 'Pr&eacute;vue'}}</label>
                    </div>
                </div>
                <div class="row" ng-if="filter.date">
                    <div class="col-xs-4 text-right">Date de formation</div>
                    <div class="col-xs-8" ng-switch="filter.date.o">
                        <span ng-switch-when="soon">Dans moins de <span class="text-primary">{{filter.date.data}}</span> mois</span>
                        <span ng-switch-when="recent">Il y a moins de <span class="text-primary">{{filter.date.data}}</span> mois</span>
                        <span ng-switch-when="specific">Entre le <span class="text-primary">{{filter.date.from | date: 'dd/MM/yyyy'}}</span> et le <span class="text-primary">{{filter.date.to | date: 'dd/MM/yyyy'}}</span></span>
                    </div>
                </div>
                <div class="row" ng-if="filter.trtys">
                    <div class="col-xs-4 text-right">Type(s) de formation</div>
                    <div class="col-xs-8">
                        <div ng-repeat="trty_pk in filter.trtys" ng-init="type=trainingTypes[trty_pk]">
                            {{type.trty_name}}<span ng-repeat="cert in type.certificates" class="pull-right">&nbsp;<label class="label label-primary">{{cert.cert_short}}</label></span>
                        </div>
                    </div>
                </div>
                <div class="row" ng-if="filter.nb.o" ng-init="option = (comparisonOptions | filter: {value: filter.nb.o})[0]">
                    <div class="col-xs-4 text-right">Nombre d'inscrits</div>
                    <div class="col-xs-8">{{option.display}} <span class="text-primary">{{filter.nb.d}}</span></div>
                </div>
                <div class="row" ng-if="filter.scdd.o" ng-init="option = (comparisonOptions | filter: {value: filter.scdd.o})[0]">
                    <div class="col-xs-4 text-right">Nombre de valid&eacute;s</div>
                    <div class="col-xs-8">{{option.display}} <span class="text-primary">{{filter.scdd.d}}</span></div>
                </div>
                <div class="row" ng-if="filter.flkd.o" ng-init="option = (comparisonOptions | filter: {value: filter.flkd.o})[0]">
                    <div class="col-xs-4 text-right">Nombre de recal&eacute;s/absents</div>
                    <div class="col-xs-8">{{option.display}} <span class="text-primary">{{filter.flkd.d}}</span></div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xs-12">
        <div class="panel panel-primary">
            <div class="panel-heading">R&eacute;sultats</div>
            <busy busy-task="trainingsSearchResults">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-xs-4 text-right">Nombre de formations</div>
                        <div class="col-xs-8"><strong>{{trainings.length}}</strong> formation(s) correspondant aux crit&egrave;res</div>
                    </div>
                </div>
                <table class="table table-striped table-hover" st-table="shown" st-safe-src="trainings" st-set-sort="orderByNullLast">
                    <thead>
                        <tr>
                            <th width="53px"></th>
                            <th ng-repeat="header in theaders" ng-bind-html="header.display" class="st-sort" st-sort="{{header.sort || header.path}}" st-skip-natural="true"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="trng in shown" ng-if="$index < 100" ng-click="select(trng.trng_pk);" class="clickme" ng-mouseenter="hover=true" ng-mouseleave="hover=false" ng-class="{'text-primary': hover}">
                            <td>
                                <button type="button" class="btn btn-primary btn-xs" ng-disabled="!hover">VOIR</button>
                            </td>
                            <td ng-repeat="header in theaders">{{get(trng, header.path)}}</td>
                        </tr>
                        <tr ng-if="shown.length > 100">
                            <td colspan="{{theaders.length + 1}}" class="text-center">{{shown.length - 100}} formations suppl&eacute;mentaires...</td>
                        </tr>
                    </tbody>
                </table>
            </busy>
        </div>
    </div>
</div>

<div class="side-panel-container text-right">
    <button type="button" class="btn btn-raised btn-success side-panel-item" ng-click="getLink()"><span class="glyphicon glyphicon-link"></span>&nbsp;Sauver/partager recherche</button>
    <button type="button" class="btn btn-raised btn-primary side-panel-item" ng-click="params()"><span class="glyphicon glyphicon-wrench"></span>&nbsp;Modifier param&egrave;tres</button>
    <button type="button" class="btn btn-raised btn-primary side-panel-item" ng-click="changeDisplay()"><span class="glyphicon glyphicon-eye-open"></span>&nbsp;Param&egrave;tres d'affichage</button>
</div>
