<div st-table="shown" st-safe-src="sites" st-set-sort="orderByNullLast">
    <form class="form-horizontal">
        <div class="form-group">
            <label for="pageSize" class="control-label col-xs-4 col-md-2">Sites par page</label>
            <div class="col-xs-8 col-md-2">
                <select class="form-control" id="pageSize" ng-model="pageSize" ng-init="pageSize = 25" ng-options="size for size in [5, 10, 25, 100]"></select>
            </div>
        </div>
    </form>
    <div class="row">
        <div class="col-md-10 col-md-offset-1">
            <div class="panel panel-primary">
                <div class="panel-heading">Sites</div>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th></th>
                            <th width="50%">
                                <div class="st-sort" st-sort="site_name" st-skip-natural="true" st-sort-default="true">Nom</div>
                                <input st-search="site_name" placeholder="Rechercher..." class="form-control" type="text" />
                            </th>
                            <th></th>
                            <th width="50%">
                                <div class="st-sort" st-sort="dept.dept_name" st-skip-natural="true">D&eacute;partement</div>
                                <input st-search="dept.dept_name" placeholder="Rechercher..." class="form-control" type="text" />
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="site in shown" class="clickme" ng-mouseenter="hover=true" ng-mouseleave="hover = false">
                            <td ng-click="editSite(site.site_pk)">
                                <button type="button" class="btn btn-primary btn-xs" ng-disabled="!(hover && !deptHover)">MODIFIER</button>
                            </td>
                            <td class="shrinkable" ng-class="{'text-primary': hover && !deptHover}" ng-click="editSite(site.site_pk)">{{::site.site_name}}</td>
                            <td ng-click="editDept(site.dept.dept_pk)" ng-mouseenter="deptHover=true" ng-mouseleave="deptHover=false">
                                <button type="button" class="btn btn-primary btn-xs" ng-disabled="!deptHover">MODIFIER</button>
                            </td>
                            <td class="shrinkable" ng-mouseenter="deptHover=true" ng-mouseleave="deptHover=false" ng-class="{'text-primary': deptHover}" ng-click="editDept(site.dept.dept_pk)">
                                {{::site.dept.dept_name}}
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="panel-footer text-center">
                    <td colspan="5" class="text-center">
                        <div st-pagination="" st-items-by-page="pageSize" st-displayed-pages="7"></div>
                    </td>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="side-panel-container text-right" if-role="'admin'">
    <button type="button" class="btn btn-raised btn-success side-panel-item" ng-click="create()"><span class="glyphicon glyphicon-plus"></span>&nbsp;Cr&eacute;er site</button>
</div>
