<div class="col-md-8 col-md-offset-2">
	<div class="panel panel-success" ng-if="invalidEmployees.length === 0">
		<div class="panel-heading">Mise &agrave; jour pr&ecirc;te</div>
		<div class="panel-body">
			<strong class="text-primary" ng-bind="employees.length" />&nbsp;employ&eacute;s sont inclus dans ce recensement des effectifs.
			<hr />
			Touyes les informations comprises dans ce fichier ont &eacute;t&eacute; <strong class="text-success">analys&eacute;es</strong> et <strong class="text-success">valid&eacute;es</strong>&nbsp;: la mise &agrave; jour peut &ecirc;tre effectu&eacute;e.
		</div>
		<div class="panel-footer text-center">
			<button type="button" class="btn btn-primary" ng-click="step3.update()" loading="busy" loading-text="Mise &agrave; jour...">Mettre &agrave; jour</button>
		</div>
	</div>

	<div class="panel panel-danger" ng-if="invalidEmployees.length > 0">
		<div class="panel-heading">Mise &agrave; jour impossible</div>
		<div class="panel-body">
			<strong class="text-primary" ng-bind="employees.length" />&nbsp;employ&eacute;s sont inclus dans ce recensement, dont <strong class="text-danger" ng-bind="invalidEmployees.length" /> pr&eacute;sentant une ou plusieurs erreur(s).<hr />
			<span class="text-danger">Les informations comprises dans ce fichier n'ont pas toutes &eacute;t&eacute; valid&eacute;es&nbsp;: la mise &agrave; jour ne peut pas &ecirc;tre effectu&eacute;e.</span><br /><br />
		</div>
	</div>
</div>

<div class="col-xs-12">
	<div class="panel panel-danger" st-table="shown" st-safe-src="invalidEmployees" ng-if="invalidEmployees.length > 0">
		<div class="panel-heading">Agents invalid&eacute;s</div>
		<table class="table table-striped table-hover">
			<thead>
				<tr>
					<th width="10%">
						<div class="st-sort" st-sort="line" st-skip-natural="true">Ligne</div>
						<input st-search="line" placeholder="Rechercher..." class="form-control" type="text"/>
					</th>
					<th class="shrinkable" width="15%">
						<div class="st-sort" st-sort="empl_pk" st-skip-natural="true">Matricule</div>
						<input st-search="empl_pk" placeholder="Rechercher..." class="form-control" type="text"/>
					</th>
					<th class="shrinkable" width="20%">
						<div class="st-sort" st-sort="empl_firstname" st-skip-natural="true">Pr&eacute;nom</div>
						<input st-search="empl_firstname" placeholder="Rechercher..." class="form-control" type="text"/>
					</th>
					<th class="shrinkable" width="20%">
						<div class="st-sort" st-sort="empl_surname" st-skip-natural="true">Nom de famille</div>
						<input st-search="empl_surname" placeholder="Rechercher..." class="form-control" type="text"/>
					</th>
					<th class="shrinkable vtop" width="30%">
						<div class="st-sort text-danger" st-sort="error" st-skip-natural="true">Erreur(s)</div>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="empl in shown" class="clickme" ng-click="step3.open(empl)">
					<td>{{empl.line + 1}}</td>
					<td class="shrinkable">{{empl.empl_pk}}</td>
					<td class="shrinkable">{{empl.empl_firstname}}</td>
					<td class="shrinkable">{{empl.empl_surname}}</td>
					<td class="shrinkable text-danger">
						<span ng-repeat="error in empl.error">
							<span ng-bind-html="step2.template[error].display" ng-if="$first" /><span ng-bind-html="step2.template[error].display | lowercase" ng-if="!$first" /><span ng-if="!$last">, </span>
						</span>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>